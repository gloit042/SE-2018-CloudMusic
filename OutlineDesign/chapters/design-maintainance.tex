\chapter{维护设计}

维护设计主要为数据库的维护功能，包括数据库的日常备份、压缩、维护。

备份功能的具体实现主要交由 PostGreSQL 的功能来完成。

备份的主要策略为：

用户信息为每日 4:00 进行事务日志备份。恢复方法为回到上一次完全备份的时间点，按照之后每日的日志进行恢复。完全备份通过备份的事务日志进行更新，使得其位于一个月前。

评论为每小时按事务日志备份，每天 4:00 完全备份评论信息。恢复方法为回到上一次完全备份的时间点，按照之后每小时的增量进行恢复。

文件等数据内容较大，但大多数文件更改频率不频繁，每日进行增量备份。增量备份会被压缩。备份的恢复方式为校验当前数据库中错误内容或者错误文件，之后依据备份将错误内容或者错误文件进行更新。